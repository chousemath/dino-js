<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>DinoJS</title>
  <meta name="description" content="Dinosaur Running Game">
  <meta name="author" content="Joseph Choi">
  <!-- Tells the browser to follow the screen-width of the device -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
  <style>
  	* { padding: 0; margin: 0; }
  	canvas { background: #eee; display: block; margin: 0 auto; }
  </style>
</head>

<body>
  <canvas id='myCanvas' width='480' height='320'></canvas>
  <script>

    var originX = 40;
    var unit = 3;
    var originY = 315; // 315
    var jumpHeight = unit*20;
    const upperLimitY = originY - jumpHeight; // 315
    const lowerLimitY = originY; // 315
    var cycleCounter = 0;
    var cycleCounterLimit = 3;
    var currentDinoFootingLeft;

    var canvas = document.getElementById('myCanvas');
    // store the 2d rendering context, tool used to paint on canvas
    var ctx = canvas.getContext('2d');
    drawDinoResting();

    function draw() {
      // drawing code
      if (cycleCounter < cycleCounterLimit) {
        cycleCounter++;
      } else {
        if (currentDinoFootingLeft) {
          drawDinoLeft();
        } else {
          drawDinoRight();
        }
        currentDinoFootingLeft = !currentDinoFootingLeft;
        cycleCounter = 0;
      }
    }

    document.onkeydown = function(e) {
      switch (e.keyCode) {
        case 38:
          var i = 0, howManyTimes = 180;
          function f() {
            originY = lowerLimitY - jumpHeight * Math.sin(i * Math.PI / 180);
            i += 1;
            if( i <= howManyTimes ){
                setTimeout(f, 1);
            }
          }
          f();
          break;
        case 40:
          // down arrow
          setInterval(draw, 20);
          break;
      }
    };

    function drawDinoResting() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath(originX-unit*6, originY);

      ctx.rect(originX, originY, unit*2, unit);
      ctx.rect(originX+unit*5, originY, unit*2, unit);
      ctx.rect(originX, originY-unit, unit, unit);
      ctx.rect(originX+unit*5, originY-unit, unit, unit);
      ctx.rect(originX, originY-unit*2, unit*2, unit);
      ctx.rect(originX+unit*5, originY-unit*2, unit, unit);
      ctx.rect(originX, originY-unit*3, unit*3, unit);
      ctx.rect(originX+unit*4, originY-unit*3, unit*2, unit);
      ctx.rect(originX-unit, originY-unit*4, unit*7, unit);
      ctx.rect(originX-unit, originY-unit*5, unit*8, unit);
      ctx.rect(originX-unit*4, originY-unit*6, unit*12, unit);
      ctx.rect(originX-unit*5, originY-unit*7, unit*14, unit);
      ctx.rect(originX-unit*6, originY-unit*8, unit*15, unit);
      ctx.rect(originX-unit*6, originY-unit*9, unit*15, unit);
      ctx.rect(originX-unit*6, originY-unit*10, unit*3, unit);
      ctx.rect(originX, originY-unit*10, unit*9, unit);
      ctx.rect(originX+unit*10, originY-unit*10, unit, unit);
      ctx.rect(originX-unit*6, originY-unit*11, unit*2, unit);
      ctx.rect(originX+unit, originY-unit*11, unit*10, unit);
      ctx.rect(originX-unit*6, originY-unit*12, unit, unit);
      ctx.rect(originX+unit*3, originY-unit*12, unit*6, unit);
      ctx.rect(originX-unit*6, originY-unit*13, unit, unit);
      ctx.rect(originX+unit*5, originY-unit*13, unit*4, unit);
      ctx.rect(originX+unit*6, originY-unit*14, unit*8, unit);
      ctx.rect(originX+unit*6, originY-unit*15, unit*5, unit);
      ctx.rect(originX+unit*6, originY-unit*16, unit*5, unit);
      ctx.rect(originX+unit*6, originY-unit*17, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*18, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*19, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*20, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*21, unit*2, unit);
      ctx.rect(originX+unit*9, originY-unit*21, unit*8, unit);
      ctx.rect(originX+unit*6, originY-unit*22, unit*2, unit);
      ctx.rect(originX+unit*8, originY-unit*22, unit*9, unit);
      ctx.rect(originX+unit*7, originY-unit*23, unit*8, unit);

      ctx.fillStyle = '#000000';
      ctx.fill();
      ctx.closePath();
    }

    function drawDinoLeft() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath(originX-unit*6, originY);

      ctx.rect(originX, originY, unit*2, unit);
      // ctx.rect(originX+unit*5, originY, unit*2, unit);
      ctx.rect(originX, originY-unit, unit, unit);
      // ctx.rect(originX+unit*5, originY-unit, unit, unit);
      ctx.rect(originX, originY-unit*2, unit*2, unit);
      ctx.rect(originX+unit*5, originY-unit*2, unit*2, unit);
      ctx.rect(originX, originY-unit*3, unit*3, unit);
      ctx.rect(originX+unit*4, originY-unit*3, unit*2, unit);
      ctx.rect(originX-unit, originY-unit*4, unit*7, unit);
      ctx.rect(originX-unit, originY-unit*5, unit*8, unit);
      ctx.rect(originX-unit*4, originY-unit*6, unit*12, unit);
      ctx.rect(originX-unit*5, originY-unit*7, unit*14, unit);
      ctx.rect(originX-unit*6, originY-unit*8, unit*15, unit);
      ctx.rect(originX-unit*6, originY-unit*9, unit*15, unit);
      ctx.rect(originX-unit*6, originY-unit*10, unit*3, unit);
      ctx.rect(originX, originY-unit*10, unit*9, unit);
      ctx.rect(originX+unit*10, originY-unit*10, unit, unit);
      ctx.rect(originX-unit*6, originY-unit*11, unit*2, unit);
      ctx.rect(originX+unit, originY-unit*11, unit*10, unit);
      ctx.rect(originX-unit*6, originY-unit*12, unit, unit);
      ctx.rect(originX+unit*3, originY-unit*12, unit*6, unit);
      ctx.rect(originX-unit*6, originY-unit*13, unit, unit);
      ctx.rect(originX+unit*5, originY-unit*13, unit*4, unit);
      ctx.rect(originX+unit*6, originY-unit*14, unit*8, unit);
      ctx.rect(originX+unit*6, originY-unit*15, unit*5, unit);
      ctx.rect(originX+unit*6, originY-unit*16, unit*5, unit);
      ctx.rect(originX+unit*6, originY-unit*17, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*18, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*19, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*20, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*21, unit*2, unit);
      ctx.rect(originX+unit*9, originY-unit*21, unit*8, unit);
      ctx.rect(originX+unit*6, originY-unit*22, unit*2, unit);
      ctx.rect(originX+unit*8, originY-unit*22, unit*9, unit);
      ctx.rect(originX+unit*7, originY-unit*23, unit*8, unit);

      ctx.fillStyle = '#000000';
      ctx.fill();
      ctx.closePath();
    }

    function drawDinoRight() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.beginPath(originX-unit*6, originY);

      // ctx.rect(originX, originY, unit*2, unit);
      ctx.rect(originX+unit*5, originY, unit*2, unit);
      // ctx.rect(originX, originY-unit, unit, unit);
      ctx.rect(originX+unit*5, originY-unit, unit, unit);
      ctx.rect(originX, originY-unit*2, unit*2, unit);
      ctx.rect(originX+unit*5, originY-unit*2, unit, unit);
      ctx.rect(originX, originY-unit*3, unit*3, unit);
      ctx.rect(originX+unit*4, originY-unit*3, unit*2, unit);
      ctx.rect(originX-unit, originY-unit*4, unit*7, unit);
      ctx.rect(originX-unit, originY-unit*5, unit*8, unit);
      ctx.rect(originX-unit*4, originY-unit*6, unit*12, unit);
      ctx.rect(originX-unit*5, originY-unit*7, unit*14, unit);
      ctx.rect(originX-unit*6, originY-unit*8, unit*15, unit);
      ctx.rect(originX-unit*6, originY-unit*9, unit*15, unit);
      ctx.rect(originX-unit*6, originY-unit*10, unit*3, unit);
      ctx.rect(originX, originY-unit*10, unit*9, unit);
      ctx.rect(originX+unit*10, originY-unit*10, unit, unit);
      ctx.rect(originX-unit*6, originY-unit*11, unit*2, unit);
      ctx.rect(originX+unit, originY-unit*11, unit*10, unit);
      ctx.rect(originX-unit*6, originY-unit*12, unit, unit);
      ctx.rect(originX+unit*3, originY-unit*12, unit*6, unit);
      ctx.rect(originX-unit*6, originY-unit*13, unit, unit);
      ctx.rect(originX+unit*5, originY-unit*13, unit*4, unit);
      ctx.rect(originX+unit*6, originY-unit*14, unit*8, unit);
      ctx.rect(originX+unit*6, originY-unit*15, unit*5, unit);
      ctx.rect(originX+unit*6, originY-unit*16, unit*5, unit);
      ctx.rect(originX+unit*6, originY-unit*17, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*18, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*19, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*20, unit*11, unit);
      ctx.rect(originX+unit*6, originY-unit*21, unit*2, unit);
      ctx.rect(originX+unit*9, originY-unit*21, unit*8, unit);
      ctx.rect(originX+unit*6, originY-unit*22, unit*2, unit);
      ctx.rect(originX+unit*8, originY-unit*22, unit*9, unit);
      ctx.rect(originX+unit*7, originY-unit*23, unit*8, unit);

      ctx.fillStyle = '#000000';
      ctx.fill();
      ctx.closePath();
    }
  </script>
</body>
</html>
